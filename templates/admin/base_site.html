{% extends "admin/base.html" %}

{% load i18n %}

{% block extrahead %}
{{ block.super }}

<style>
    .language-form {
        display: inline-block;
    }
    .language-label {
        display: inline-block;
        margin-right: 5px;
    }
    .language-select {
        display: inline-block;
    }
</style>
{% endblock extrahead %}

{% block translate-bar %}

    <a class="nav-link btn">
        {% comment %} <i class="fas fa-globe mr-2" id="languageIcon" aria-hidden="true"></i> {% endcomment %}
        <form class="language-form" id="languageForm" method='post' action="{% url "set_language" %}">
            {% csrf_token %}
            {% comment %} <label class="language-label" for="language">{% trans "Lang:" %}</label> {% endcomment %}
            <select class="language-select" id="language" name="language" onchange="changeLanguage(this.value)">
                {% get_current_language as LANGUAGE_CODE %}
                {% get_available_languages as LANGUAGES %}
                {% for lang_code, lang_name in LANGUAGES %}
                    <option value="{{ lang_code }}" {% if lang_code == LANGUAGE_CODE %}selected{% endif %}>
                        {{ lang_name }}
                    </option>
                {% endfor %}
            </select>
        </form>
    </a>

    <script>
        function changeLanguage(languageCode) {
            const form = document.getElementById('languageForm');
            form.elements.language.value = languageCode;
            form.submit();
        }
    </script>
{% endblock translate-bar %}